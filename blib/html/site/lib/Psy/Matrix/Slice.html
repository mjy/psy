<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Psy::Matrix::Slice</title>
<link rel="stylesheet" href="../../../..//Active.css" type="text/css" />
<link rev="made" href="mailto:" />
</head>

<body>
<table border="0" width="100%" cellspacing="0" cellpadding="3">
<tr><td class="block" valign="middle">
<big><strong><span class="block">&nbsp;Psy::Matrix::Slice</span></strong></big>
</td></tr>
</table>

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#version">VERSION</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<ul>

		<li><a href="#new">new</a></li>
		<li><a href="#clone">clone</a></li>
		<li><a href="#blocks">blocks</a></li>
		<li><a href="#taxa">taxa</a></li>
		<li><a href="#remove">remove</a></li>
		<li><a href="#loop">loop</a></li>
		<li><a href="#difference">difference</a></li>
		<li><a href="#total">total</a></li>
		<li><a href="#first">first</a></li>
		<li><a href="#final">final</a></li>
		<li><a href="#lengthlastblk">lengthLastBlk</a></li>
		<li><a href="#describe">describe</a></li>
		<li><a href="#decribecoded">decribeCoded</a></li>
		<li><a href="#newrandomslice">newRandomSlice</a></li>
		<li><a href="#pruneuninformativetaxa">pruneUninformativeTaxa</a></li>
		<li><a href="#collapse">collapse</a></li>
		<li><a href="#describecollapsed">describeCollapsed</a></li>
		<li><a href="#prune">prune</a></li>
		<li><a href="#containsblk">containsBlk</a></li>
		<li><a href="#unexcludedblkstart">unexcludedBlkStart</a></li>
	</ul>

</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>Psy::Matrix::Slice</p>
<p>
<a href="#__index__"><small>__top</small></a>
</p>
<hr />
<h1><a name="version">VERSION</a></h1>
<p>Version 0.01</p>
<p>
<a href="#__index__"><small>__top</small></a>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>A slice object.  Slices are essentially character and/or terminal partitions (sets).  Characters are used in the sense of blocks, not columns of data (though a block can be length 1).  
The object uses hashes rather than arrays so that set operations are easy.</p>
<pre>
        use Psy::Matrix::Slice; 
        my $s = slice-&gt;new();</pre>
<p>
</p>
<h2><a name="new">new</a></h2>
<p>
</p>
<h2><a name="clone">clone</a></h2>
<p>Returns a clone of the object</p>
<p>
</p>
<h2><a name="blocks">blocks</a></h2>
<p><table cellspacing="0" cellpadding="0"><tr><td>Adds/accesses block has (indicies, not objects).  Returns a hash, not an array.
<tr><td>Usage:<td>
<tr><td><td>$s-&gt;blocks(0, 1, 2, 45..65, 3);
<tr><td><td>@foo = $s-&gt;blocks;</table></p>
<p>
</p>
<h2><a name="taxa">taxa</a></h2>
<pre>

As blocks but for taxa.</pre>
<p>
</p>
<h2><a name="remove">remove</a></h2>
<pre>

Removes blocks OR taxa.</pre>
<p>Usage:</p>
<pre>
        my @remove_me = (3, 9, 10, 11, 13, 14..25);
        $s-&gt;remove('Blocks', @remove_me);       
OR</pre>
<pre>
        $s-&gt;remove('Taxa', 3, 9, 10, 2..4);  # note overlaps (e.g. 3) don't fail, and order doesn't matter</pre>
<p>
</p>
<h2><a name="loop">loop</a></h2>
<pre>

Returns ordered list of taxa OR blocks as array.</pre>
<p>Usage:</p>
<pre>
        my @foo = $s-&gt;loop('Taxa');
        OR
        for my $blk ($s-&gt;loop('Blocks') { ... }</pre>
<p>
</p>
<h2><a name="difference">difference</a></h2>
<pre>

As union, but returns difference.</pre>
<p>
</p>
<h2><a name="total">total</a></h2>
<pre>

Returns total blocks/taxa.
Usage:</pre>
<pre>
        print &quot;total blocks: &quot;, $s-&gt;total('Blocks');</pre>
<p>Not zero beers.</p>
<p>
</p>
<h2><a name="first">first</a></h2>
<p>Return the first block OR taxon in the slice (as ordered by integer index).</p>
<p>
</p>
<h2><a name="final">final</a></h2>
<p>Return the final ('last' is reserved word) block OR taxon in the slice (as ordered by integer index).</p>
<p>
</p>
<h2><a name="lengthlastblk">lengthLastBlk</a></h2>
<p>Returns the string length of the last block (e.g. 2000 has length 4).</p>
<p>
</p>
<h2><a name="describe">describe</a></h2>
<p>Returns a text description of the slice, formatted for human reading.</p>
<p>
</p>
<h2><a name="decribecoded">decribeCoded</a></h2>
<p>Returns a text description of the slice, formatted for <code>eval()</code> or use in batch-file.</p>
<p>
</p>
<h2><a name="newrandomslice">newRandomSlice</a></h2>
<p>Returns a reference to a new slice object with randomly selected blocks and taxa.</p>
<p>Usage:</p>
<pre>
        $foo = $s-&gt;new_random_slice();
        OR 
        $foo = $s-&gt;new_random_slice(&quot;numtaxamax&quot; =&gt; 5, &quot;numtaxamin&quot;=&gt; 5, &quot;numblocksmax&quot; =&gt; &quot;all&quot; );</pre>
<p>
</p>
<h2><a name="pruneuninformativetaxa">pruneUninformativeTaxa</a></h2>
<p>Somewhat missnamed, removes taxa with less than -cutoff % (0.00 - 1.00 data) from $self.</p>
<p>Must pass a matrix object as -mx</p>
<p>
</p>
<h2><a name="collapse">collapse</a></h2>
<p>Collapses slices based on adjoining bracketed or unbracketed blocks.  Returns a HOH that looks like this:</p>
<pre>
        '0' =&gt; {
                         'type' =&gt; 0,
                         'slice' =&gt; bless( {
                                                                 'Blocks' =&gt; {
                                                                                           '0' =&gt; undef
                                                                                         },
                                                                 'VERSION' =&gt; '0.01',
                                                                 'Taxa' =&gt; {},
                                                                 'Kind' =&gt; ''
                                                           }, 'slice' )
                   },
        '1' =&gt; {
                         'type' =&gt; 1,
                         'slice' =&gt; bless( {
                                                                 'Blocks' =&gt; {
                                                                                           '1' =&gt; undef,
                                                                                           '2' =&gt; undef
                                                                                         },
                                                                 'VERSION' =&gt; '0.01',
                                                                 'Taxa' =&gt; {},
                                                                 'Kind' =&gt; ''
                                                           }, 'slice' )
                   }
                   ...</pre>
<p>
</p>
<h2><a name="describecollapsed">describeCollapsed</a></h2>
<p>Not really an object method, but called as such for now.  Describes the breakdown of the results of $s-&gt;collapse</p>
<p>
</p>
<h2><a name="prune">prune</a></h2>
<p>Removes bracketed or unbracketed blocks from the slice.  
</p>
<pre>

        -modes =&gt; &lt; [bracketed] | unbracketed &gt;</pre>
<p>
</p>
<h2><a name="containsblk">containsBlk</a></h2>
<p>Returns true if it contains a block at the passed index (not block object)
	
=cut

</p>
<p>sub containsBlk {
	my $self = shift;
	my $blk = shift;
	die 'no block index to slice-&gt;containsBlk' if not defined $blk; # 0 must test true
	(grep /$blk/, keys %{$self-&gt;{Blocks}}) &amp;&amp; return 1;
	0
}

</p>
<p>
</p>
<h2><a name="unexcludedblkstart">unexcludedBlkStart</a></h2>
<p>The following 4 methods are hacks to take a matrix, and a block index and return a start/end value.  See structure-&gt;nucPairs for usage.

</p>
<p><table cellspacing="0" cellpadding="0"><tr><td>Requires:
<tr><td><td>-mx
<tr><td><td>-blk_index
<tr><td>
</table></p>
<p><a href="#__index__"><small>__top</small></a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="3">
<tr><td class="block" valign="middle">
<big><strong><span class="block">&nbsp;Psy::Matrix::Slice</span></strong></big>
</td></tr>
</table>

</body>

</html>
