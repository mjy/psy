
sub out_xrna () { #### NOT FUNCTIONAL ####
	my (
		$taxindex,
		$slice,
	) = @_;

	# must initstems with the slice you're using or it will die?
	
	# remap the matrix and nbs to new ones, striping spaces as we go
	
	my @tmpmx;
	my @tmpnbd;
	my %stemmap;
	
	my $i=0;
	foreach my $blk ($slice->loop("Blocks")) {
		if ($nbd[$blk][3]==1) {
			$tmpmx[$i] = $mx[$taxindex][$blk][0];
		       	$tmpmx[$i] =~ s/-//g;
		}
		else {
			my $data = $mx[$taxindex][$blk][0];
			my $mask = $nbd[$blk][8];

			my $newdata;
			my $newmask;
			
			while (length($data)) {
				my $dchar = chop ($data);
				my $mchar = chop ($mask);
				
				if (not $dchar eq "-") {
					$newdata .= $dchar;
					$newmask .= $mchar;
				}
				
				else {
					print "WARNING.  Dash in mask in block $blk [$dchar $mchar]\n" if ($mchar eq '(') or ($mchar eq ")"); 
				}
				
			}
			$tmpmx[$i] = $newdata;
			$tmpnbd[$i] = $newmask;
		}
		$stemmap{$i} = $blk if grep ($_ == $blk, %stems) ;
		
		$i++;
	}
}


